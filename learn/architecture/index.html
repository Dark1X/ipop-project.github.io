<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>Architecture overview</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />






<link href="../../wp-content/themes/orion/css/reset.css" rel="stylesheet" type="text/css" media="screen" />
<link href="../../wp-content/themes/orion/css/grid.css" rel="stylesheet" type="text/css" media="screen" />
<link href="../../wp-content/themes/orion/css/master.css" rel="stylesheet" type="text/css" media="screen" />
<link href="../../wp-content/themes/orion/css/superfish.css" rel="stylesheet" type="text/css" media="screen" />
<link href="../../wp-content/themes/orion/style2.css" rel="stylesheet" type="text/css" media="screen" />

<!-- wp_head includes jQuery and dependencies from st_theme_scripts() in lib/functions/header_functions.php -->


<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js?ver=3.7.1'></script>
<script type='text/javascript' src='../../wp-content/themes/orion/js/superfish.js?ver=1.0'></script>
<script type='text/javascript' src='../../wp-content/themes/orion/js/jquery.imgr.min.js?ver=1.1'></script>
<script type='text/javascript' src='../../wp-content/themes/orion/js/jquery.formalize.js?ver=1.2'></script>
<script type='text/javascript' src='../../wp-content/themes/orion/js/custom.js?ver=1.0'></script>
<script type='text/javascript' src='../../wp-includes/js/comment-reply.min.js?ver=3.7.1'></script>

 

<link rel='next' title='Controller' href='../controller' />

<link rel='canonical' href='./' />
<link rel='shortlink' href='../../?p=114' />
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-47375109-1'], ['_trackPageview']);
	(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
<style type="text/css" media="screen">#header {height:80px}</style>	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

<!-- Avoid Conflicts - Add Custom Javascript and CSS Below wp_head -->
<script type="text/javascript" src="../../wp-content/themes/orion/js/slides.min.jquery.js"></script>

<!-- Load PrettyPhoto if Requested -->


<!--[if IE 7]>
<link href="http://ipop-project.org/wp-content/themes/orion/css/ie7.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->

<!--[if IE 8]>
<link href="http://ipop-project.org/wp-content/themes/orion/css/ie8.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->

<!--[if lte IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<style type="text/css">
html button,
html .gallery .gallery-item img,
html .gallery .gallery-item img.thumbnail,
html ul.tabs li a.active,
html input[type="submit"],
html input[type="reset"],
html input[type="button"],
html .cta,
html a.button,
html a.more-link,
html #teaser,
html #breadcrumbs,
html #menu .columns,
html #menu.wide,
html .latest-img,
html .widget-container.S1,
html .widget-container.S2,
html .widget-container.S3,
html #author-info,
html ul.advanced-recent-posts li img,
html .instapress img,
html .st-callout,
html .wp-post-image {behavior: url("http://ipop-project.org/wp-content/themes/orion/css/PIE.php") !important;position: relative;}
</style>
<![endif]-->



</head>
<body class="page page-id-114 page-child parent-pageid-34 page-template-default h-arial b-arial light">
<a name="top"></a>
<div id="header_wrap">
<div id="header">
    <div id="nav">
    <div id="menu_wrap" class="below" style="width:950px;float:right;margin:20px 0px 0px 150px;"><div id = "menu"><div class="menu-main-container"><ul id="menu-main" class="menu"><li id="menu-item-50" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-50"><a href="../../">About</a>
<ul class="sub-menu">
	<li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="../../about-2/project-history">Project history</a></li>
	<li id="menu-item-505" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-505"><a href="../../about-2/usage-scenarios">Usage scenarios</a></li>
	<li id="menu-item-345" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-345"><a href="../../ipop-users">IPOP Users</a>
	<ul class="sub-menu">
		<li id="menu-item-348" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-348"><a target="_blank" href="http://www.archer-project.org">Archer</a></li>
		<li id="menu-item-347" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-347"><a target="_blank" href="http://portal.futuregrid.org">FutureGrid</a></li>
		<li id="menu-item-349" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-349"><a target="_blank" href="http://www.conpaas.eu">ConPaaS</a></li>
		<li id="menu-item-346" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-346"><a target="_blank" href="http://www.pragma-grid.net/">PRAGMA</a></li>
	</ul>
</li>
	<li id="menu-item-145" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-145"><a href="../../about-2/acknowledgments">Sponsors</a></li>
</ul>
</li>
<li id="menu-item-195" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current-menu-ancestor current-menu-parent menu-item-has-children menu-item-195"><a href="./">Learn</a>
<ul class="sub-menu">
	<li id="menu-item-183" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-has-children menu-item-183"><a href="./">Architecture</a>
	<ul class="sub-menu">
		<li id="menu-item-111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="../tincan">TinCan</a></li>
		<li id="menu-item-315" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-315"><a href="../controllers">Controller</a></li>
		<li id="menu-item-163" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-163"><a target="_blank" href="http://github.com/ipop-project/documentation/wiki/Controller-API">Controller-TinCan API</a></li>
	</ul>
</li>
	<li id="menu-item-189" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-189"><a href="../xmpposn-bindings">XMPP/OSN Bindings</a></li>
	<li id="menu-item-192" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-192"><a href="../nat-traversal">NAT Traversal</a></li>
	<li id="menu-item-162" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-162"><a href="../controllers">Controllers</a>
	<ul class="sub-menu">
		<li id="menu-item-112" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-112"><a href="../../socialvpn">SocialVPN</a></li>
		<li id="menu-item-113" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-113"><a href="../groupvpn">GroupVPN</a></li>
	</ul>
</li>
	<li id="menu-item-84" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-84"><a href="../publications">Documents and publications</a></li>
	<li id="menu-item-540" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-540"><a target="_blank" href="../../wp-content/uploads/2014/07/IPOP-WhitePaper-1407.pdf">IPOP White Paper</a></li>
	<li id="menu-item-85" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-85"><a href="../videos">Videos</a></li>
</ul>
</li>
<li id="menu-item-216" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-216"><a href="../../use/tutorials">Use</a>
<ul class="sub-menu">
	<li id="menu-item-314" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-314"><a href="../../use/tutorials">Hands-on tutorials</a>
	<ul class="sub-menu">
		<li id="menu-item-298" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-298"><a href="../../use/tutorials/socialvpn-google-hangout-tutorial">Build VPN with social friends using Google account</a></li>
		<li id="menu-item-306" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-306"><a href="../../use/tutorials/groupvpn-with-your-own-xmpp-server">Build GroupVPN cluster with XMPP server</a></li>
		<li id="menu-item-388" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-388"><a href="../../use/tutorials/socialvpn-with-your-own-xmpp-server">Build VPN with social friends using  your own XMPP server</a></li>
	</ul>
</li>
	<li id="menu-item-331" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-331"><a href="../../use/installing-ipop">Installing SocialVPN</a>
	<ul class="sub-menu">
		<li id="menu-item-96" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-96"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Running-SocialVPN-on-Linux">Linux</a></li>
		<li id="menu-item-98" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-98"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Running-SocialVPN-on-Windows-7">Windows</a></li>
		<li id="menu-item-97" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-97"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Running-SocialVPN-on-Android">Android</a></li>
	</ul>
</li>
	<li id="menu-item-332" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-332"><a href="../../use/installing-ipop">Installing GroupVPN</a>
	<ul class="sub-menu">
		<li id="menu-item-333" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-333"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Running-GroupVPN-on-Linux">Linux</a></li>
		<li id="menu-item-99" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-99"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Running-GroupVPN-on-OpenWRT-Emulator">OpenWRT</a></li>
	</ul>
</li>
	<li id="menu-item-542" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-542"><a target="_blank" href="http://software.opensuse.org/download/package?project=network:vpn:ipop&#038;package=ipop">Packages</a></li>
	<li id="menu-item-479" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-479"><a target="_blank" href="https://github.com/ipop-project/downloads/releases">Downloads</a></li>
	<li id="menu-item-100" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-100"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki">Building</a>
	<ul class="sub-menu">
		<li id="menu-item-334" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-334"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Building-the-code-for-Linux">Linux</a></li>
		<li id="menu-item-335" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-335"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Building-the-code-for-Android">Android</a></li>
		<li id="menu-item-336" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-336"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Building-the-code-for-OpenWRT-malta">OpenWRT</a></li>
		<li id="menu-item-337" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-337"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Building-the-code-for-Raspberry-Pi">Raspberry Pi</a></li>
	</ul>
</li>
	<li id="menu-item-299" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-299"><a target="_blank" href="http://github.com/ipop-project/documentation/wiki/FAQs">FAQs</a></li>
	<li id="menu-item-300" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-300"><a target="_blank" href="http://github.com/ipop-project/documentation/wiki/Known-issues">Known issues</a></li>
</ul>
</li>
<li id="menu-item-41" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-41"><a href="../../contribute">Contribute</a>
<ul class="sub-menu">
	<li id="menu-item-93" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-93"><a target="_blank" href="http://github.com/ipop-project">Code repository</a></li>
	<li id="menu-item-94" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-94"><a target="_blank" href="https://github.com/ipop-project/ipop-tincan/issues">Reporting issues</a></li>
	<li id="menu-item-139" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-139"><a target="_blank" href="https://github.com/ipop-project/documentation/wiki/Development-workflow">Submitting code</a></li>
</ul>
</li>
<li id="menu-item-89" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-89"><a href="../../contact">Contact</a>
<ul class="sub-menu">
	<li id="menu-item-287" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-287"><a target="_blank" href="https://lists.ufl.edu/cgi-bin/wa?SUBED1=IPOP-USERS-L&#038;A=1">Mailing list</a></li>
	<li id="menu-item-499" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-499"><a target="_blank" href="http://webchat.freenode.net/">#ipop IRC channel</a></li>
	<li id="menu-item-103" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-103"><a href="../../contact/people">People</a></li>
</ul>
</li>
</ul></div></div></div>    </div>
		<span id="text-header"><a href="../../" title="">IPOP</a></span> <span id="text-slogan"></span></div>
</div>
<!--/header-->





<div id="main">
	<div id="container" class="container_24  clearfix">
		<div class="mid_w_wide">
			<div class="grid_24">				<div id="content" class="wide">
				<p id="breadcrumbs"><a href="../../">Home</a> <span class="sep">&raquo;</span> <a href="../">Learn</a> <span class="sep">&raquo;</span> <strong>Architecture overview</strong></p>
									<div class="post" id="post-114">
												<h1 class="posttitle">Architecture overview</h1>						<div class="entry clearfix">
												<p dir="ltr"><img class="alignleft  wp-image-153" alt="ipop-arch" src="../../wp-content/uploads/2013/12/ipop-arch.png" width="614" height="313" /></p>
<p dir="ltr">IPOP&#8217;s architecture and design have evolved since the project&#8217;s inception from one based on a structured P2P library (Brunet) connecting all peers into a global overlay, to the current design based on TinCan links that connect peers to trusted peers where trust relationships are extracted from online social network providers. At its core, IPOP leverages existing technologies (Jingle/WebRTC) and standards (STUN, TURN, XMPP) to tunnel IP packets over P2P links between two computers &#8211; even when they are both behind firewalls and/or Network Address Translators (NATs). Users can choose to deploy their VPNs on existing public XMPP infrastructure such as Google Hangouts or their own personal XMPP server.</p>
<p dir="ltr">The current IPOP architecture has the following layers and modules:</p>
<p dir="ltr"><strong>Discovery and notification layer:</strong> IPOP peers discover and notify other peers and exchange endpoint information using an XMPP overlay. This is used for (small) notification messages, and allows users to connect to various existing XMPP-compliant social network infrastructures (e.g. Google&#8217;s Hangout, or a private ejabberd service)</p>
<p dir="ltr"><strong>TinCan links and datapath layer:</strong> IPOP peers establish private P2P links directly to other peers using the TinCan links by leveraging <a href="https://developers.google.com/talk/libjingle/">Google&#8217;s libjingle library</a>. In contrast to XMPP notifications, the &#8220;TinCan&#8221; links carry the bulk of the communication directly between users, without going through a centralized gateway. The libjingle library provides support for NAT traversal through standards including STUN (direct P2P tunnels over UDP) and TURN (tunnels through a third-party relay when direct connections fail), allowing TinCan links to work across NAT-constrained devices. Virtual network interfaces (&#8220;tap&#8221; devices) provide the binding between each host to an IPOP overlay, by capturing, encapsulating and sending packets from the O/S of one endpoint to the other endpoint over TinCan links.</p>
<p dir="ltr"><strong>Policy/control layer:</strong> The datapath layer at each peer is configured and managed by a separate controller module, which is responsible for creating/destroying TinCan links and forwarding packets over multiple links if necessary. A controller module (e.g. a Python program) uses a JSON-over-UDP API exposed by the TinCan datapath to program and receive notifications from the IPOP-TinCan module, allowing flexibility in the implementation of various user-defined networking policies.</p>
<p dir="ltr">These layers are implemented by the modules depicted in the above figure, as described below:</p>
<p dir="ltr"><strong><a href="https://github.com/ipop-project/ipop-tap" target="_blank">IPOP-Tap</a>:</strong> this is the lowest-layer module. It interfaces with a virtual network interface (VNIC) to be able to pick/inject IP packets from/to the virtual network. It is responsible for maintaining send/receive queues, and using the system call interface of the O/S (e.g. Unix ioctl()) to configure the network and read/write from a virtual network interface (tap device).</p>
<p dir="ltr"><a title="TinCan" href="../tincan"><strong>IPOP-TinCan</strong></a>: this is the module that handles the communication primitive used to link two endpoints and tunnel traffic &#8211; TinCan links. Specifically, it handles the setup/tear-down of a link (link setup thread), and the encapsulation, sending and receiving of tunneled IP packets over these links (packet handling thread). The link setup thread uses external services through the XMPP protocol to discover and notify peers for which TinCan links are to be formed, and STUN/TURN protocols to establish links between nodes that are constrained by NATs (Network Address Translators). It also exposes a management API to the controller module. The packet handling thread uses the IPOP-tap module to interact with the virtual network, and the Sockets API to send/receive tunneled packets through the physical Internet.</p>
<p dir="ltr"><a title="Controller" href="../controllers"><strong>Controller:</strong></a> this module is responsible for configuring and controlling the setup and management of an overlay of IPOP-TinCan links, using the API exposed by the IPOP-TinCan module. The controller is responsible for establishing the policies for topology creation of an IPOP overlay (e.g. all-to-all, social), and determining when links are created/destroyed (e.g. when a peer node’s presence is detected, or on-demand triggered by IP traffic), using the IPOP-TinCan mechanisms exposed by its API to implement the policies. The two major controllers currently implemented are <a title="GroupVPN" href="../groupvpn">GroupVPN</a> (for groups of nodes organized as clusters), and <a title="SocialVPN" href="../socialvpn">SocialVPN</a> (for end users connected to their social peers).</p>
<p>&nbsp;</p>
						</div><!-- /.entry -->
											</div><!-- /post -->

					<!-- AdSense -->
	    							<!-- /AdSense -->

					
<!-- You can start editing here. -->
<div id="comments">

	

</div>

										<div class="clear"></div>
								</div><!--/#content-->
							</div><!--/GetContentGrid-->

								
															<div class="clear"></div>
						</div><!--/MidWrap-->
					</div><!--/#container-->
					</div><!--/wrap-->
					</div>
<div class="clear"></div>
<div id="footer">


		
<div id="bottom">
This material is based upon work supported in part by the National Science Foundation under Grant No. 1339737.<br /><div class="copy"><a href="http://www.simplethemes.com" title="Wordpress Themes">Wordpress Theme by Simple Themes</a></div>
</div><!--/bottom-->
</div><!--/footer-->



</body>
</html>